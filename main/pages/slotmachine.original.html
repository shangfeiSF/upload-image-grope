<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Slot Machine</title>

    <script type="text/javascript" src="/zepto.js"></script>
    <script type="text/javascript" src="/slotmachine.original.js"></script>

    <link rel="stylesheet" href="pages/slotmachine.css">
</head>
<body>
<div class="line">
    <div id="machine1" class="slotMachine">
        <div class="slot slot1"></div>
        <div class="slot slot2"></div>
        <div class="slot slot3"></div>
        <div class="slot slot4"></div>
        <div class="slot slot5"></div>
        <div class="slot slot6"></div>
    </div>

    <div id="machine2" class="slotMachine">
        <div class="slot slot1"></div>
        <div class="slot slot2"></div>
        <div class="slot slot3"></div>
        <div class="slot slot4"></div>
        <div class="slot slot5"></div>
        <div class="slot slot6"></div>
    </div>

    <div id="machine3" class="slotMachine">
        <div class="slot slot1"></div>
        <div class="slot slot2"></div>
        <div class="slot slot3"></div>
        <div class="slot slot4"></div>
        <div class="slot slot5"></div>
        <div class="slot slot6"></div>
    </div>

    <div id="slotMachineButton1" class="slotMachineButton">GO!</div>

    <script>
        $(document).ready(function () {
            var machine1 = $("#machine1").slotMachine({
                active: 0,
                delay: 500,
                repeat: true
            })
            var machine2 = $("#machine2").slotMachine({
                active: 0,
                delay: 500
            })
            var machine3 = $("#machine3").slotMachine({
                active: 0,
                delay: 500
            })

            function onComplete($el, active) {
                switch ($el[0].id) {
                    case 'machine1':
                        $("#machine1Result").text("Index: " + active.index)
                        break

                    case 'machine2':
                        $("#machine2Result").text("Index: " + active.index)
                        break

                    case 'machine3':
                        $("#machine3Result").text("Index: " + active.index)
                        break
                }
            }

            $("#slotMachineButton1").click(function () {
                machine1.shuffle(3, onComplete)

                setTimeout(function () {
                    machine2.shuffle(3, onComplete)
                }, 500)


                setTimeout(function () {
                    machine3.shuffle(3, onComplete)
                }, 1000)
            })
        })
    </script>
</div>

<div class="line">
    <div id="machine4" class="slotMachine">
        <div class="slot slot1"></div>
        <div class="slot slot2"></div>
        <div class="slot slot3"></div>
        <div class="slot slot4"></div>
        <div class="slot slot5"></div>
        <div class="slot slot6"></div>
    </div>

    <div id="machine5" class="slotMachine">
        <div class="slot slot1"></div>
        <div class="slot slot2"></div>
        <div class="slot slot3"></div>
        <div class="slot slot4"></div>
        <div class="slot slot5"></div>
        <div class="slot slot6"></div>
    </div>

    <div id="machine6" class="slotMachine">
        <div class="slot slot1"></div>
        <div class="slot slot2"></div>
        <div class="slot slot3"></div>
        <div class="slot slot4"></div>
        <div class="slot slot5"></div>
        <div class="slot slot6"></div>
    </div>

    <div id="slotMachineButtonShuffle" class="slotMachineButton">Shuffle!</div>

    <div id="slotMachineButtonStop" class="slotMachineButton">Stop!</div>

    <script>
        $(document).ready(function () {
            var machine4 = $("#machine4").slotMachine({
                active: 0,
                delay: 500
            })
            var machine5 = $("#machine5").slotMachine({
                active: 1,
                delay: 500
            })
            var machine6 = $("#machine6").slotMachine({
                active: 2,
                delay: 500
            })

            $("#slotMachineButtonShuffle").click(function () {
                machine4.shuffle()
                machine5.shuffle()
                machine6.shuffle()
            })

            $("#slotMachineButtonStop").click(function () {
                if (machine4.isRunning()) {
                    machine4.stop(true)
                } else {
                    if (machine5.isRunning()) {
                        machine5.stop(true)
                    } else {
                        if (machine6.isRunning()) {
                            machine6.stop(true)
                        }
                    }
                }
            })
        })
    </script>
</div>

<div class="line">
    <div id="slotMachineButtonPrev" class="slotMachineButton">PREV</div>

    <div id="machine7" class="slotMachine" style="margin-left: 50px;">
        <div class="slot slot1"></div>
        <div class="slot slot2"></div>
        <div class="slot slot3"></div>
        <div class="slot slot4"></div>
        <div class="slot slot5"></div>
        <div class="slot slot6"></div>
    </div>

    <div id="slotMachineButtonNext" class="slotMachineButton">NEXT</div>

    <script>
        $(document).ready(function () {
            var machine7 = $("#machine7").slotMachine({
                active: 0,
                delay: 500
            })
            $("#slotMachineButtonPrev").click(function () {
                machine7.prev()
            })
            $("#slotMachineButtonNext").click(function () {
                machine7.next()
            })
        })
    </script>
</div>
</body>
</html>